<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Post Frame Ad</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  /* 1. APP FRAME STYLES */
Â  Â  Â  Â  body {Â 
Â  Â  Â  Â  Â  Â  font-family: 'Poppins', sans-serif; background: #e0f2f1;Â 
Â  Â  Â  Â  Â  Â  margin: 0; padding: 20px; display: flex; justify-content: center; min-height: 100vh;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .mobile-screen {Â 
Â  Â  Â  Â  Â  Â  width: 100%; max-width: 380px; min-height: 100vh;
Â  Â  Â  Â  Â  Â  background: #f8f9fa; border: 8px solid #fff; border-radius: 40px;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 30px 60px rgba(0,0,0,0.1), 0 0 0 2px #b2dfdb;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column;
Â  Â  Â  Â  Â  Â  box-sizing: border-box; position: relative; overflow: hidden;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* HEADER */
Â  Â  Â  Â  .header {
Â  Â  Â  Â  Â  Â  background: #009688; padding: 25px 20px 20px 20px; color: white;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; border-radius: 0 0 20px 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 10px rgba(0,150,136,0.2); z-index: 10;
Â  Â  Â  Â  }
Â  Â  Â  Â  .back-btn { text-decoration: none; color: white; font-size: 24px; margin-right: 15px; font-weight: bold; }
Â  Â  Â  Â  .page-title { font-size: 18px; font-weight: 700; }

Â  Â  Â  Â  /* SCROLLABLE FORM AREA */
Â  Â  Â  Â  .container {Â 
Â  Â  Â  Â  Â  Â  padding: 20px; flex: 1; overflow-y: auto; padding-bottom: 50px;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .container::-webkit-scrollbar { display: none; }

Â  Â  Â  Â  /* FORM CARD */
Â  Â  Â  Â  .form-card {Â 
Â  Â  Â  Â  Â  Â  background: white; padding: 20px; border-radius: 15px;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 10px rgba(0,0,0,0.03); margin-bottom: 20px;Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  label { display: block; font-weight: 600; margin-bottom: 8px; color: #444; font-size: 13px; }
Â  Â  Â  Â  input, select, textarea {Â 
Â  Â  Â  Â  Â  Â  width: 100%; padding: 12px; margin-bottom: 15px;Â 
Â  Â  Â  Â  Â  Â  border: 2px solid #eee; border-radius: 10px; font-size: 13px;Â 
Â  Â  Â  Â  Â  Â  box-sizing: border-box; font-family: 'Poppins', sans-serif;
Â  Â  Â  Â  }
Â  Â  Â  Â  input:focus, select:focus, textarea:focus { border-color: #009688; outline: none; }

Â  Â  Â  Â  /* UPLOAD BOX */
Â  Â  Â  Â  .upload-box {
Â  Â  Â  Â  Â  Â  border: 2px dashed #b2dfdb; padding: 25px; text-align: center;Â 
Â  Â  Â  Â  Â  Â  border-radius: 10px; margin-bottom: 20px; background: #e0f2f1; cursor: pointer;
Â  Â  Â  Â  Â  Â  overflow: hidden; position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â  .upload-icon { font-size: 30px; display: block; margin-bottom: 5px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* IMAGE PREVIEW STYLING */
Â  Â  Â  Â  #imgPreview {
Â  Â  Â  Â  Â  Â  width: 100%; height: 150px; object-fit: cover;Â 
Â  Â  Â  Â  Â  Â  display: none; border-radius: 8px; margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* COST BOX */
Â  Â  Â  Â  .cost-box {Â 
Â  Â  Â  Â  Â  Â  background: #e3f2fd; padding: 15px; border-radius: 10px;Â 
Â  Â  Â  Â  Â  Â  border: 1px dashed #2196f3; margin-top: 10px;Â 
Â  Â  Â  Â  }
Â  Â  Â  Â  .cost-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px; color: #555; }
Â  Â  Â  Â  .cost-total {Â 
Â  Â  Â  Â  Â  Â  border-top: 1px solid #bbdefb; padding-top: 10px; margin-top: 10px;Â 
Â  Â  Â  Â  Â  Â  font-weight: 700; color: #1976d2; font-size: 16px;Â 
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between;Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  /* BUTTON */
Â  Â  Â  Â  .btn-submit {
Â  Â  Â  Â  Â  Â  background-color: #009688; color: white; width: 100%; padding: 15px;Â 
Â  Â  Â  Â  Â  Â  border: none; border-radius: 12px; font-size: 15px; font-weight: 700;Â 
Â  Â  Â  Â  Â  Â  cursor: pointer; box-shadow: 0 5px 15px rgba(0,150,136,0.3);
Â  Â  Â  Â  Â  Â  transition: 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .btn-submit:active { transform: scale(0.98); }

Â  Â  </style>
</head>
<body>

<div class="mobile-screen">

Â  Â  <div class="header">
Â  Â  Â  Â  <a href="vendor_dashboard.html" class="back-btn">&larr;</a>
Â  Â  Â  Â  <div class="page-title">Post Frame Ad</div>
Â  Â  </div>

Â  Â  <div class="container">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="form-card">
Â  Â  Â  Â  Â  Â  <label>Ad Image (Banner)</label>
Â  Â  Â  Â  Â  Â  <img id="imgPreview" alt="Ad Preview">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="upload-box" onclick="document.getElementById('adImage').click()">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="upload-icon">ğŸ“·</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span style="color:#00796b; font-size:12px; font-weight:600;">Click to Upload Image</span>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="adImage" style="display: none;" onchange="previewImage()">
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <label>Campaign Name</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="campName" placeholder="e.g., Diwali Sale Offer">

Â  Â  Â  Â  Â  Â  <label>Ad Description</label>
Â  Â  Â  Â  Â  Â  <textarea id="adDesc" rows="3" placeholder="Describe your offer..."></textarea>

Â  Â  Â  Â  Â  Â  <label>Target Category</label>
Â  Â  Â  Â  Â  Â  <select id="campCat">
Â  Â  Â  Â  Â  Â  Â  Â  <option>Select Category</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Banking & Financial Services</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Information Technology</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>FMCG</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Pharmaceuticals & Healthcare</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Automobile</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Retail & E-Commerce</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Real Estate & Construction</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Media & Entertainment</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Fashion & Lifestyle</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Education</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option>Other</option>
Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  <label>Target Location / Pincode</label>
Â  Â  Â  Â  Â  Â  <input type="text" placeholder="e.g., Visakhapatnam, 530016">
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="form-card">
Â  Â  Â  Â  Â  Â  <h3 style="margin-top: 0; font-size: 15px; color:#333;">Budget & Costing</h3>

Â  Â  Â  Â  Â  Â  <label>Target Views (Min 100)</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="views" value="200" min="100" oninput="calculateCost()">
Â  Â  Â  Â  Â  Â  <p style="font-size: 11px; color: #888; margin-top: -10px; margin-bottom: 15px;">Rate: â‚¹1.00 per view</p>

Â  Â  Â  Â  Â  Â  <div class="cost-box">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cost-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Rate Per View</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>â‚¹ 1.00</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cost-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Subtotal</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="subtotalDisplay">â‚¹ 200.00</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cost-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>GST (18%)</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="gstDisplay">â‚¹ 36.00</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cost-total">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Total Payable</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="totalDisplay">â‚¹ 236.00</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <button class="btn-submit" onclick="publishAd()">PAY & PUBLISH AD</button>

Â  Â  </div>

</div>

<script>
Â  Â  // --- 1. PREVIEW IMAGE ---
Â  Â  function previewImage() {
Â  Â  Â  Â  const fileInput = document.getElementById("adImage");
Â  Â  Â  Â  const file = fileInput.files[0];
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (file) {
Â  Â  Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  Â  Â  reader.onload = function(e) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("imgPreview").src = e.target.result;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("imgPreview").style.display = "block";
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector(".upload-box .upload-icon").style.display = "none";
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector(".upload-box span[style]").style.display = "none";Â 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // --- 2. CALCULATE COST ---
Â  Â  function calculateCost() {
Â  Â  Â  Â  var views = parseInt(document.getElementById('views').value) || 0;
Â  Â  Â  Â  var costPerView = 1.00;
Â  Â  Â  Â  var subtotal = views * costPerView;
Â  Â  Â  Â  var gst = subtotal * 0.18;
Â  Â  Â  Â  var total = subtotal + gst;

Â  Â  Â  Â  document.getElementById('subtotalDisplay').innerText = "â‚¹ " + subtotal.toFixed(2);
Â  Â  Â  Â  document.getElementById('gstDisplay').innerText = "â‚¹ " + gst.toFixed(2);
Â  Â  Â  Â  document.getElementById('totalDisplay').innerText = "â‚¹ " + total.toFixed(2);
Â  Â  }

Â  Â  // --- 3. PUBLISH AD (Fixed with Compression) ---
Â  Â  function publishAd() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  // A. Get Input Values
Â  Â  Â  Â  Â  Â  const name = document.getElementById('campName').value;
Â  Â  Â  Â  Â  Â  const category = document.getElementById('campCat').value;
Â  Â  Â  Â  Â  Â  const desc = document.getElementById('adDesc').value;
Â  Â  Â  Â  Â  Â  const views = document.getElementById('views').value;
Â  Â  Â  Â  Â  Â  const totalCost = document.getElementById('totalDisplay').innerText;
Â  Â  Â  Â  Â  Â  const fileInput = document.getElementById("adImage");

Â  Â  Â  Â  Â  Â  // B. Validations
Â  Â  Â  Â  Â  Â  if(!name) { alert("Please enter Campaign Name"); return; }
Â  Â  Â  Â  Â  Â  if(!desc) { alert("Please enter Ad Description"); return; }
Â  Â  Â  Â  Â  Â  if(category === "Select Category") { alert("Please select a valid Category"); return; }
Â  Â  Â  Â  Â  Â  if(fileInput.files.length === 0) { alert("Please select an ad image!"); return; }

Â  Â  Â  Â  Â  Â  // --- C. COMPRESS IMAGE LOGIC START ---
Â  Â  Â  Â  Â  Â  const MAX_WIDTH = 800; // Shrink huge images to 800px width
Â  Â  Â  Â  Â  Â  const file = fileInput.files[0];
Â  Â  Â  Â  Â  Â  const img = new Image();
Â  Â  Â  Â  Â  Â  img.src = URL.createObjectURL(file);

Â  Â  Â  Â  Â  Â  img.onload = function() {
Â  Â  Â  Â  Â  Â  Â  Â  // 1. Create a canvas to resize
Â  Â  Â  Â  Â  Â  Â  Â  const canvas = document.createElement('canvas');
Â  Â  Â  Â  Â  Â  Â  Â  const ctx = canvas.getContext('2d');

Â  Â  Â  Â  Â  Â  Â  Â  // 2. Calculate new height to keep aspect ratio
Â  Â  Â  Â  Â  Â  Â  Â  const scaleFactor = MAX_WIDTH / img.width;
Â  Â  Â  Â  Â  Â  Â  Â  canvas.width = MAX_WIDTH;
Â  Â  Â  Â  Â  Â  Â  Â  canvas.height = img.height * scaleFactor;

Â  Â  Â  Â  Â  Â  Â  Â  // 3. Draw image on canvas (Resizing happens here)
Â  Â  Â  Â  Â  Â  Â  Â  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

Â  Â  Â  Â  Â  Â  Â  Â  // 4. Convert to JPEG at 70% quality (Massive size reduction)
Â  Â  Â  Â  Â  Â  Â  Â  const compressedBase64 = canvas.toDataURL('image/jpeg', 0.7);

Â  Â  Â  Â  Â  Â  Â  Â  // 5. SAVE THE COMPRESSED DATA
Â  Â  Â  Â  Â  Â  Â  Â  saveDataToStorage(name, category, desc, views, totalCost, compressedBase64);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  // --- C. COMPRESS IMAGE LOGIC END ---

Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  alert("âŒ System Error: " + e.message);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // --- 4. SAVING FUNCTION ---
Â  Â  function saveDataToStorage(name, category, desc, views, totalCost, base64Image) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const newAd = {
Â  Â  Â  Â  Â  Â  Â  Â  id: "FRA" + Math.floor(Math.random() * 9999),
Â  Â  Â  Â  Â  Â  Â  Â  type: "Frame",
Â  Â  Â  Â  Â  Â  Â  Â  title: name,
Â  Â  Â  Â  Â  Â  Â  Â  desc: desc,
Â  Â  Â  Â  Â  Â  Â  Â  category: category,
Â  Â  Â  Â  Â  Â  Â  Â  image: base64Image, // Saving the SMALL image now
Â  Â  Â  Â  Â  Â  Â  Â  budget: totalCost,
Â  Â  Â  Â  Â  Â  Â  Â  target: views,
Â  Â  Â  Â  Â  Â  Â  Â  status: "Pending",
Â  Â  Â  Â  Â  Â  Â  Â  date: new Date().toLocaleDateString()
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  // OPTIONAL: Clear old data if you still get errors (Safety measure)
Â  Â  Â  Â  Â  Â  // localStorage.clear();Â 

Â  Â  Â  Â  Â  Â  // Save to User Page Queue
Â  Â  Â  Â  Â  Â  let allAds = JSON.parse(localStorage.getItem("all_frame_ads") || "[]");
Â  Â  Â  Â  Â  Â  allAds.push(newAd);
Â  Â  Â  Â  Â  Â  localStorage.setItem("all_frame_ads", JSON.stringify(allAds));

Â  Â  Â  Â  Â  Â  // Save to Vendor Dashboard
Â  Â  Â  Â  Â  Â  let vendorAds = JSON.parse(localStorage.getItem("vendorCampaigns") || "[]");
Â  Â  Â  Â  Â  Â  vendorAds.push(newAd);
Â  Â  Â  Â  Â  Â  localStorage.setItem("vendorCampaigns", JSON.stringify(vendorAds));

Â  Â  Â  Â  Â  Â  alert("âœ… Ad Submitted Successfully!");
Â  Â  Â  Â  Â  Â  window.location.href = "vendor-dashboard.html";

Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  if (err.name === 'QuotaExceededError') {
Â  Â  Â  Â  Â  Â  Â  Â  alert("âŒ Storage Full: Even the compressed image is too big, or you have too many ads saved. Try deleting old ads.");
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  alert("âŒ Error saving ad: " + err.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
</script>
</body>
</html>

Now pls confirm 
